#! /usr/bin/env node
const fetch = require('node-fetch');
const fs = require('fs');


const jsonToGo = require('../vendor/json-to-go/json-to-go.js');

if (process.argv.length !== 3) {
  console.log("parameter is wrong.")
  return
}

fetch(process.argv[2])
  .then(res =>res.json())
  .then(json => {
    let res = jsonToGo(JSON.stringify(json), 'AutoGenerated');
    fs.writeFile("hoge.go", res.go, (err) => {
      if (err) throw err;
      console.log('generated.');
    });
    return console.log( res.go );
    }
  );


